<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>node ç‰ˆæœ¬ |  ğŸ‘£</title>
    <meta name="description" content="è¶ŠåŠªåŠ›è¶Šå¹¸è¿ï¼Œè€ƒç ”å¤±è´¥äº†ï¼Œè¯·å‹¿è´ªç©">
    <link rel="icon" href="/look/favicon.jpg">
    
    <link rel="preload" href="/look/assets/css/0.styles.667d2b8f.css" as="style"><link rel="preload" href="/look/assets/js/app.b2ccb0bc.js" as="script"><link rel="preload" href="/look/assets/js/31.621d74fe.js" as="script"><link rel="prefetch" href="/look/assets/js/10.b471e18e.js"><link rel="prefetch" href="/look/assets/js/11.142b1017.js"><link rel="prefetch" href="/look/assets/js/12.38c12c1a.js"><link rel="prefetch" href="/look/assets/js/13.3752826a.js"><link rel="prefetch" href="/look/assets/js/14.6851574f.js"><link rel="prefetch" href="/look/assets/js/15.be40f810.js"><link rel="prefetch" href="/look/assets/js/16.3056c1b7.js"><link rel="prefetch" href="/look/assets/js/17.57430dd8.js"><link rel="prefetch" href="/look/assets/js/18.533f521c.js"><link rel="prefetch" href="/look/assets/js/19.89c42762.js"><link rel="prefetch" href="/look/assets/js/2.57f770e0.js"><link rel="prefetch" href="/look/assets/js/20.3639913f.js"><link rel="prefetch" href="/look/assets/js/21.fcca079c.js"><link rel="prefetch" href="/look/assets/js/22.2e3b1bd5.js"><link rel="prefetch" href="/look/assets/js/23.5f1efc98.js"><link rel="prefetch" href="/look/assets/js/24.4a510e86.js"><link rel="prefetch" href="/look/assets/js/25.a63093ec.js"><link rel="prefetch" href="/look/assets/js/26.f4aafbef.js"><link rel="prefetch" href="/look/assets/js/27.c482ae88.js"><link rel="prefetch" href="/look/assets/js/28.1cb9f9b1.js"><link rel="prefetch" href="/look/assets/js/29.91278398.js"><link rel="prefetch" href="/look/assets/js/3.f56078e6.js"><link rel="prefetch" href="/look/assets/js/30.f9b1e228.js"><link rel="prefetch" href="/look/assets/js/32.b73bab9d.js"><link rel="prefetch" href="/look/assets/js/33.f976c3bd.js"><link rel="prefetch" href="/look/assets/js/34.b8fd7e9b.js"><link rel="prefetch" href="/look/assets/js/35.b3b0b225.js"><link rel="prefetch" href="/look/assets/js/36.25d3b6f4.js"><link rel="prefetch" href="/look/assets/js/37.0d0a19fe.js"><link rel="prefetch" href="/look/assets/js/38.1344bf3b.js"><link rel="prefetch" href="/look/assets/js/39.95cdce16.js"><link rel="prefetch" href="/look/assets/js/4.0590639b.js"><link rel="prefetch" href="/look/assets/js/40.aa321c9e.js"><link rel="prefetch" href="/look/assets/js/41.0cffb016.js"><link rel="prefetch" href="/look/assets/js/42.fe3b4060.js"><link rel="prefetch" href="/look/assets/js/43.f400a076.js"><link rel="prefetch" href="/look/assets/js/44.1df23907.js"><link rel="prefetch" href="/look/assets/js/45.57f4b13e.js"><link rel="prefetch" href="/look/assets/js/46.8074bf51.js"><link rel="prefetch" href="/look/assets/js/47.ba79660f.js"><link rel="prefetch" href="/look/assets/js/5.7c0857a5.js"><link rel="prefetch" href="/look/assets/js/6.69989f0b.js"><link rel="prefetch" href="/look/assets/js/7.1a5c9794.js"><link rel="prefetch" href="/look/assets/js/8.14f7555d.js"><link rel="prefetch" href="/look/assets/js/9.d3587b59.js">
    <link rel="stylesheet" href="/look/assets/css/0.styles.667d2b8f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/look/" class="home-link router-link-active"><!----> <span class="site-name"> ğŸ‘£</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/look/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/look/blog/" class="nav-link">åšå®¢</a></div><div class="nav-item"><a href="/look/stack/" class="nav-link">æŠ€æœ¯æ ˆ</a></div><div class="nav-item"><a href="/look/pc/" class="nav-link router-link-active">PCç«¯</a></div><div class="nav-item"><a href="/look/mobile/" class="nav-link">ç§»åŠ¨ç«¯</a></div><div class="nav-item"><a href="/look/mini/" class="nav-link">å°ç¨‹åº</a></div><div class="nav-item"><a href="/look/uni/" class="nav-link">å¤šç«¯ç»Ÿä¸€</a></div><div class="nav-item"><a href="/look/work/" class="nav-link">å·¥ä½œæ€»ç»“</a></div><div class="nav-item"><a href="/look/tool/" class="nav-link">æ•ˆç‡å·¥å…·</a></div><div class="nav-item"><a href="/look/devops/" class="nav-link">è¿ç»´</a></div> <a href="https://github.com/841660202/look" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/look/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/look/blog/" class="nav-link">åšå®¢</a></div><div class="nav-item"><a href="/look/stack/" class="nav-link">æŠ€æœ¯æ ˆ</a></div><div class="nav-item"><a href="/look/pc/" class="nav-link router-link-active">PCç«¯</a></div><div class="nav-item"><a href="/look/mobile/" class="nav-link">ç§»åŠ¨ç«¯</a></div><div class="nav-item"><a href="/look/mini/" class="nav-link">å°ç¨‹åº</a></div><div class="nav-item"><a href="/look/uni/" class="nav-link">å¤šç«¯ç»Ÿä¸€</a></div><div class="nav-item"><a href="/look/work/" class="nav-link">å·¥ä½œæ€»ç»“</a></div><div class="nav-item"><a href="/look/tool/" class="nav-link">æ•ˆç‡å·¥å…·</a></div><div class="nav-item"><a href="/look/devops/" class="nav-link">è¿ç»´</a></div> <a href="https://github.com/841660202/look" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>PCç«¯</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/look/pc/react/1.html" class="active sidebar-link">react</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/look/pc/react/1.html#node-ç‰ˆæœ¬" class="sidebar-link">node ç‰ˆæœ¬</a></li><li class="sidebar-sub-header"><a href="/look/pc/react/1.html#æ²¡å‡çº§å‰ç‰ˆæœ¬" class="sidebar-link">æ²¡å‡çº§å‰ç‰ˆæœ¬</a></li><li class="sidebar-sub-header"><a href="/look/pc/react/1.html#å‡çº§å" class="sidebar-link">å‡çº§å</a></li><li class="sidebar-sub-header"><a href="/look/pc/react/1.html#yarn" class="sidebar-link">yarn</a></li><li class="sidebar-sub-header"><a href="/look/pc/react/1.html#æŸ¥çœ‹ç”µè„‘ä¸Šå…¨å±€npmåŒ…" class="sidebar-link">æŸ¥çœ‹ç”µè„‘ä¸Šå…¨å±€npmåŒ…</a></li><li class="sidebar-sub-header"><a href="/look/pc/react/1.html#å‡çº§yarn" class="sidebar-link">å‡çº§yarn</a></li><li class="sidebar-sub-header"><a href="/look/pc/react/1.html#å¦‚ä½•å†™æ›´å°‘çš„reducer" class="sidebar-link">å¦‚ä½•å†™æ›´å°‘çš„reducer</a></li><li class="sidebar-sub-header"><a href="/look/pc/react/1.html#yarnç”¨ä¸èµ·æ¥æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ" class="sidebar-link">yarnç”¨ä¸èµ·æ¥æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/look/pc/react/1.html#ä»€ä¹ˆæ—¶å€™çœ‹çœ‹reactæºç ï¼Ÿ" class="sidebar-link">ä»€ä¹ˆæ—¶å€™çœ‹çœ‹reactæºç ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/look/pc/react/1.html#æŠ€æœ¯æ ˆ" class="sidebar-link">æŠ€æœ¯æ ˆ</a></li></ul></li><li><a href="/look/pc/react/mockjs.html" class="sidebar-link">æ¨¡æ‹Ÿæ•°æ®</a></li><li><a href="/look/pc/print/lodop.html" class="sidebar-link">æ‰“å°</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><p>#node</p> <h2 id="node-ç‰ˆæœ¬"><a href="#node-ç‰ˆæœ¬" class="header-anchor">#</a> node ç‰ˆæœ¬</h2> <div class="language- extra-class"><pre class="language-text"><code>
Node å‡çº§

nodeæœ‰ä¸€ä¸ªæ¨¡å—å«nï¼ˆè¿™åå­—å¯å¤ŸçŸ­çš„ã€‚ã€‚ã€‚ï¼‰ï¼Œæ˜¯ä¸“é—¨ç”¨æ¥ç®¡ç†node.jsçš„ç‰ˆæœ¬çš„ã€‚
é¦–å…ˆå®‰è£…næ¨¡å—ï¼š
npm install -g n
ç¬¬äºŒæ­¥ï¼š
å‡çº§node.jsåˆ°æœ€æ–°ç¨³å®šç‰ˆ
n stable
æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿï¼
nåé¢ä¹Ÿå¯ä»¥è·Ÿéšç‰ˆæœ¬å·æ¯”å¦‚ï¼š
n v0.10.26
æˆ–
n 0.10.26
å°±è¿™ä¹ˆç®€å•ã€‚
å¦å¤–åˆ†äº«å‡ ä¸ªnpmçš„å¸¸ç”¨å‘½ä»¤
Â npm -v Â  Â  Â  Â  Â #æ˜¾ç¤ºç‰ˆæœ¬ï¼Œæ£€æŸ¥npm æ˜¯å¦æ­£ç¡®å®‰è£…ã€‚ Â 
Â npm install express Â  #å®‰è£…expressæ¨¡å— Â 
Â npm install -g express Â #å…¨å±€å®‰è£…expressæ¨¡å— Â 
Â npm list Â  Â  Â  Â  #åˆ—å‡ºå·²å®‰è£…æ¨¡å— Â 
Â npm show express Â  Â  #æ˜¾ç¤ºæ¨¡å—è¯¦æƒ… Â 
Â npm update Â  Â  Â  Â #å‡çº§å½“å‰ç›®å½•ä¸‹çš„é¡¹ç›®çš„æ‰€æœ‰æ¨¡å— Â 
Â npm update express Â  Â #å‡çº§å½“å‰ç›®å½•ä¸‹çš„é¡¹ç›®çš„æŒ‡å®šæ¨¡å— Â 
Â npm update -g express Â #å‡çº§å…¨å±€å®‰è£…çš„expressæ¨¡å— Â 
Â npm uninstall express Â #åˆ é™¤æŒ‡å®šçš„æ¨¡å—



</code></pre></div><h2 id="æ²¡å‡çº§å‰ç‰ˆæœ¬"><a href="#æ²¡å‡çº§å‰ç‰ˆæœ¬" class="header-anchor">#</a> æ²¡å‡çº§å‰ç‰ˆæœ¬</h2> <div class="language- extra-class"><pre class="language-text"><code>chenhailong@chenhailongdeMacBook-Pro:~/development/umi/peoject$ node -v
v8.9.1
chenhailong@chenhailongdeMacBook-Pro:~/development/umi/peoject$ npm -v
5.5.1
chenhailong@chenhailongdeMacBook-Pro:~/development/umi/peoject$ 

</code></pre></div><h2 id="å‡çº§å"><a href="#å‡çº§å" class="header-anchor">#</a> å‡çº§å</h2> <div class="language- extra-class"><pre class="language-text"><code>chenhailong@chenhailongdeMacBook-Pro:~/development/umi/peoject$ node -v
v10.16.0
chenhailong@chenhailongdeMacBook-Pro:~/development/umi/peoject$ npm -v
5.5.1
chenhailong@chenhailongdeMacBook-Pro:~/development/umi/peoject$ yarn -v
1.15.2
chenhailong@chenhailongdeMacBook-Pro:~/development/umi/peoject$ 

</code></pre></div><h2 id="yarn"><a href="#yarn" class="header-anchor">#</a> yarn</h2> <p><a href="https://yarnpkg.com/zh-Hans/docs/install#mac-stable" target="_blank" rel="noopener noreferrer">yarn<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>å‡çº§å‰</p> <div class="language- extra-class"><pre class="language-text"><code>chenhailong@chenhailongdeMacBook-Pro:~$ yarn --version
1.15.2
chenhailong@chenhailongdeMacBook-Pro:~$ 

</code></pre></div><h2 id="æŸ¥çœ‹ç”µè„‘ä¸Šå…¨å±€npmåŒ…"><a href="#æŸ¥çœ‹ç”µè„‘ä¸Šå…¨å±€npmåŒ…" class="header-anchor">#</a> æŸ¥çœ‹ç”µè„‘ä¸Šå…¨å±€npmåŒ…</h2> <div class="language- extra-class"><pre class="language-text"><code>chenhailong@chenhailongdeMacBook-Pro:~$ cnpm list -g --depth 0
npm WARN npm npm does not support Node.js v10.16.0
npm WARN npm You should probably upgrade to a newer version of node as we
npm WARN npm can't make any promises that npm will work with this version.
npm WARN npm Supported releases of Node.js are the latest release of 4, 6, 7, 8.
npm WARN npm You can find the latest version at https://nodejs.org/
npm WARN npm npm does not support Node.js v10.16.0
npm WARN npm You should probably upgrade to a newer version of node as we
npm WARN npm can't make any promises that npm will work with this version.
npm WARN npm Supported releases of Node.js are the latest release of 4, 6, 7, 8, 9.
npm WARN npm You can find the latest version at https://nodejs.org/
/usr/local/lib
â”œâ”€â”€ @angular/cli@7.0.2
â”œâ”€â”€ ant-design-pro-cli@0.2.5
â”œâ”€â”€ appcenter-cli@1.0.16
â”œâ”€â”€ babel-cli@6.26.0
â”œâ”€â”€ cnpm@5.2.0
â”œâ”€â”€ code-push-cli@2.1.8
â”œâ”€â”€ code-push-server@0.2.20
â”œâ”€â”€ cordova@8.0.0
â”œâ”€â”€ create-react-app@1.5.2
â”œâ”€â”€ create-react-native-app@1.0.0
â”œâ”€â”€ damo-cli@0.0.10
â”œâ”€â”€ dva-cli@0.9.2
â”œâ”€â”€ dva-native-cli@0.0.8
â”œâ”€â”€ exp@55.0.5
â”œâ”€â”€ express-generator@4.16.0
â”œâ”€â”€ flow-bin@0.67.1
â”œâ”€â”€ forever@0.15.3
â”œâ”€â”€ gitbook-cli@2.3.2
â”œâ”€â”€ grunt@1.0.1
â”œâ”€â”€ hexo-cli@1.1.0
â”œâ”€â”€ ice-devtools@2.0.1
â”œâ”€â”€ ionic@3.9.2
â”œâ”€â”€ ios-deploy@1.9.2
â”œâ”€â”€ ios-sim@6.1.2
â”œâ”€â”€ n@4.1.0
â”œâ”€â”€ npm@5.5.1
â”œâ”€â”€ react-native-cli@2.0.1
â”œâ”€â”€ react-native-git-upgrade@0.2.7
â”œâ”€â”€ react-native-update-cli@0.1.0
â”œâ”€â”€ rnpm@1.9.0
â”œâ”€â”€  error: ENOENT: no such file or directory, open '/usr/local/lib/node_modules/roadhog-api-doc/package.json
â”œâ”€â”€ supervisor@0.12.0
â”œâ”€â”€  error: ENOENT: no such file or directory, open '/usr/local/lib/node_modules/tsd/package.json
â”œâ”€â”€ tyarn@0.1.0
â”œâ”€â”€ typescript@3.0.1
â”œâ”€â”€ vue-cli@2.9.6
â”œâ”€â”€ webpack@4.14.0
â”œâ”€â”€ webpack-cli@3.0.8
â”œâ”€â”€ webpack-dev-server@3.1.4
â”œâ”€â”€ wepy-cli@1.7.3
â””â”€â”€ yarn@1.15.2

</code></pre></div><h2 id="å‡çº§yarn"><a href="#å‡çº§yarn" class="header-anchor">#</a> å‡çº§yarn</h2> <div class="language- extra-class"><pre class="language-text"><code>cnpm install -g yarn
#chenhailong@chenhailongdeMacBook-Pro:~$ yarn -v
#1.16.0
#chenhailong@chenhailongdeMacBook-Pro:~$ 
</code></pre></div><h2 id="å¦‚ä½•å†™æ›´å°‘çš„reducer"><a href="#å¦‚ä½•å†™æ›´å°‘çš„reducer" class="header-anchor">#</a> å¦‚ä½•å†™æ›´å°‘çš„reducer</h2> <h2 id="yarnç”¨ä¸èµ·æ¥æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ"><a href="#yarnç”¨ä¸èµ·æ¥æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ" class="header-anchor">#</a> yarnç”¨ä¸èµ·æ¥æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</h2> <h2 id="ä»€ä¹ˆæ—¶å€™çœ‹çœ‹reactæºç ï¼Ÿ"><a href="#ä»€ä¹ˆæ—¶å€™çœ‹çœ‹reactæºç ï¼Ÿ" class="header-anchor">#</a> ä»€ä¹ˆæ—¶å€™çœ‹çœ‹reactæºç ï¼Ÿ</h2> <h2 id="æŠ€æœ¯æ ˆ"><a href="#æŠ€æœ¯æ ˆ" class="header-anchor">#</a> æŠ€æœ¯æ ˆ</h2> <h3 id="åŸºæœ¬"><a href="#åŸºæœ¬" class="header-anchor">#</a> åŸºæœ¬</h3> <p>es6+
react
react-router redux
<a href="http://nodejs.cn/" target="_blank" rel="noopener noreferrer">nodejs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="code.aliyun.com">dva</a>
æ˜“å­¦æ˜“ç”¨
ä»…æœ‰ 6 ä¸ª apiï¼Œå¯¹ redux ç”¨æˆ·å°¤å…¶å‹å¥½ï¼Œé…åˆ umi ä½¿ç”¨åæ›´æ˜¯é™ä½ä¸º 0 API</p> <p>elm æ¦‚å¿µ
é€šè¿‡ reducers, effects å’Œ subscriptions ç»„ç»‡ modelï¼Œç®€åŒ– redux å’Œ redux-saga å¼•å…¥çš„æ¦‚å¿µ</p> <p>æ’ä»¶æœºåˆ¶
æ¯”å¦‚ dva-loading å¯ä»¥è‡ªåŠ¨å¤„ç† loading çŠ¶æ€ï¼Œä¸ç”¨ä¸€ééåœ°å†™ showLoading å’Œ hideLoading</p> <h3 id="uiç»„ä»¶"><a href="#uiç»„ä»¶" class="header-anchor">#</a> uiç»„ä»¶</h3> <p><a href>ant design</a></p> <h3 id="è„šæ‰‹æ¶"><a href="#è„šæ‰‹æ¶" class="header-anchor">#</a> è„šæ‰‹æ¶</h3> <p><a href>ant design pro</a> <a href>umijs</a></p> <h3 id="æ ·å¼"><a href="#æ ·å¼" class="header-anchor">#</a> æ ·å¼</h3> <p><a href="http://lesscss.cn/" target="_blank" rel="noopener noreferrer">less<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="å·¥å…·"><a href="#å·¥å…·" class="header-anchor">#</a> å·¥å…·</h3> <p><a href="http://npm.taobao.org/" target="_blank" rel="noopener noreferrer">cnpm<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href>npm</a> <a href="https://yarn.bootcss.com/" target="_blank" rel="noopener noreferrer">yarn<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="mockæ•°æ®"><a href="#mockæ•°æ®" class="header-anchor">#</a> mockæ•°æ®</h3> <p><a href="http://mockjs.com/" target="_blank" rel="noopener noreferrer">mockjs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="æ•°æ®å¯è§†åŒ–"><a href="#æ•°æ®å¯è§†åŒ–" class="header-anchor">#</a> æ•°æ®å¯è§†åŒ–</h3> <p><a href="https://echarts.baidu.com/" target="_blank" rel="noopener noreferrer">echarts<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_1-1-1-3"><a href="#_1-1-1-3" class="header-anchor">#</a> 1+1+1&lt;-3</h3> <p>å‘å¸ƒé‡åˆ°ï¼Œä¸ºä»€ä¹ˆæ˜¯1+1+1&lt;-3,ä¸€ä¸ªå‰ç«¯+ä¸€ä¸ªè¿ç»´+ä¸€ä¸ªåç«¯æ•ˆç‡è¾¾åˆ°-3å€ï¼Œ
åæ€ï¼š</p> <ul><li>1ã€ä¿¡æ¯æ²Ÿé€šä¸åŠæ—¶ï¼Œ
ä¹‹å‰é¡¹ç›®ï¼Œè¿ç»´åœ¨nginxå¤„ç†æ—¶å€™æ²¡å¯¹location /apiè¿›è¡Œåå‘ä»£ç†ï¼Œçªç„¶å°±åŠ ä¸Šäº†ï¼Œè¯´æ˜¯å…¶ä»–å…¬å¸æ‰¾ä»–åšè¿ç»´å‡ºç°é—®é¢˜ï¼Œä¸ºäº†ç»Ÿä¸€å°±åŠ ä¸Šäº†ï¼Œè¿™ä»¶äº‹å‰ç«¯ä¸çŸ¥é“ï¼Œåç«¯ä¹Ÿä¸çŸ¥é“</li> <li>2ã€åç«¯å¯¹spring bootä¸ç†Ÿæ‚‰
é’ˆå¯¹1ï¼Œæˆ‘åœ¨åç«¯åŠ äº†â€‹server.servlet.context-path=/apiï¼Œä¹‹ååº”è¯¥æ˜¯ä¸Šä¸‹æ–‡ç¯å¢ƒçš„ä¸ä¸€è‡´ï¼Œå¯¼è‡´ç™»é™†æ—¶å€™å­˜å‚¨sessionï¼Œåé¢å¯¹è¯·æ±‚è¿›è¡Œé‰´æƒï¼ˆè¿™é‡Œæ²¡è¿™ä¹ˆé«˜ç«¯å¤§æ°”ï¼ŒåŸå› æ²¡ç”¨å¥½çš„jaråŒ…ç®¡ç†ï¼Œå°±æ­¤æ‰“ä½ï¼Œå¯è¡¥shiroï¼‰
è¿™ä¹Ÿæ˜¯æˆ‘çš„åŸå› ï¼Œå› ä¸ºspring bootåªèƒ½â€‹server.servlet.context-pathï¼Œserver.servlet-pathè¢«å¼ƒç”¨ï¼Œ
è§£å†³ï¼šæ•´äº†ä¸€ä¸ªä¸‹åˆï¼Œä½œä¸ºå‰ç«¯ï¼Œæˆ‘å°†webpackçš„proxyè¯•äº†ä¸ªéï¼Œåªæœ‰åœ¨2å’Œå‰ç«¯é…ç½®</li></ul> <div class="language- extra-class"><pre class="language-text"><code>  &quot;/api&quot;: {
      target: &quot;https://xxxxx.com&quot;,
      changeOrigin: true,
    },
</code></pre></div><p>ç°è±¡åªæœ‰ç™»é™†å’Œæ²¡åŠ sessionæ ¡éªŒçš„æ¥å£ï¼Œæ‰å¯ä»¥æ­£å¸¸è®¿é—®ï¼ˆç°æä¾›å¦ä¸€è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨tokenï¼Œè€Œä¸ç”¨sessionï¼‰</p> <blockquote><p>æ— å¥ˆåŠ ç­ã€‚ã€‚ã€‚ã€‚
ä¸‹ç­çæ‰¯çš„å½±å“æ€è·¯ï¼Œâ€œä¸‹ç­æ²¡äº‹çš„å…ˆå›å»å§â€ ã€‚ã€‚ã€‚ã€‚ã€‚ é¡¹ç›®ç»„äººèµ°å…‰äº†ï¼Œé™ä¸‹å¿ƒæ¥æ…¢æ…¢æ•´ã€‚
å‰ç«¯ ï¼š å‘¼å«è¿ç»´ï¼Œâ€œä½ çš„nginxé…ç½®æ˜¯å¦é…ç½®äº† location /api è¿›è¡Œåå‘ä»£ç†æ²¡é…ç½®çš„é…ç½®ä¸‹â€ï¼Œ
è¿ç»´ï¼š â€œæˆ‘é…ç½®äº†â€
å‰ç«¯ï¼šâ€œé‚£ä½ å°†æˆ‘çš„ /api/xxæ¥å£ ä»£ç†åˆ° /xxæ¥å£ â€
è¿ç»´ï¼š â€œè¿™ä¸ªæˆ‘ä»¥å‰è¯•äº†ï¼Œå› ä¸ºk8sçš„é—®é¢˜æˆ‘æ”¹ä¸äº†ï¼Œåªèƒ½è¿™æ ·ï¼Œæˆ‘å°†æ¥å£ç›´æ¥åŸæ ·ä¸åŠ¨ç»™åç«¯äº†ï¼Œè¦ä¸ä½ çœ‹çœ‹æ€ä¹ˆè§£å†³â€
ç»“æŸ
è¿˜å¥½ä¸šä½™æˆ‘æè¿‡nginxï¼Œä¹Ÿç©è¿‡spring bootå¾ˆä¹…ï¼Œæ•´ç†å¥½å‰ç«¯ æ’é™¤å‰ç«¯ã€è¿ç»´çš„æƒ…å†µã€æ‹‰åç«¯æ”¹åç«¯
è¿è¡Œä¸èµ·æ¥ï¼Œæ— è¯­äº†ï¼Œæˆ‘æ˜¯è·Ÿä½ åç«¯è¯´å¦‚ä½•é…ç½®logbackï¼Œå¯ä½ è¿™ä¹ˆå¹²æœ‰ç‚¹å‘äº†å§ï¼Œå°†æ—¥å¿—é…ç½®åˆ°/opt/logs/assets-manage-error.log
åˆ æ‰ï¼Œæˆ‘ç”µè„‘æ˜¯ä¸å…è®¸å†™æ—¥å¿—çš„ï¼Œä½ ä¹±é…ç½®ï¼Œä»¥åç”µè„‘å²‚ä¸æ˜¯è£…äº†æ»¡æ»¡çš„åƒåœ¾ã€‚è¦é…ç½®é…ç½®åˆ°é¡¹ç›®æ ¹ç›®å½•å¥½æŸ¥ä¹Ÿå¥½åˆ é™¤
è¿è¡Œèµ·æ¥
ä¹‹æ‰€ä»¥å†™Spring boot çš„é…ç½® server.servlet.context-path=/apiï¼Œæ˜¯å› ä¸ºä»¥å‰æœ‰å°è±¡
ç°åœ¨å†æŸ¥å‘ç°server.servlet.context-path ä¸server.servlet-pathæœ‰åŒºåˆ«ï¼Œä½†æ˜¯æ²¡åŠæ³•ï¼Œè¯•ä¸‹å°†/apiè¡¥åˆ°æ¯ä¸ªuserControllerä¸­ï¼Œå°†åç«¯æ¨åˆ°æµ‹è¯•ç¯å¢ƒï¼Œå‘å¸ƒæµ‹è¯•ç¯å¢ƒï¼Œæµ‹è¯•å¯ä»¥ï¼Œç„¶åè¯•ä¸‹æœ¬åœ°ï¼Œä¹Ÿå¯ä»¥ã€‚
ç°åœ¨æ˜¯æˆ‘ä¸€èˆ¬ä½¿ç”¨æœ¬åœ°åç«¯è¿›è¡Œè°ƒè¯•ï¼Œè¿™æ ·æˆ‘å¯ä»¥æ‰“åç«¯æ–­ç‚¹ï¼ŒæŸ¥çœ‹åç«¯æ¥å£æ˜¯å¦æœ‰é—®é¢˜è¿›è¡Œå¿«é€Ÿè”è°ƒï¼Œ
æœ‰çš„ç»„å‘˜æ˜¯è¿œç¨‹è¿æ¥æµ‹è¯•ç¯å¢ƒè¿›è¡Œè°ƒçš„ï¼Œæ‰€ä»¥æˆ‘éœ€è¦åœ¨requestå·¥å…·ä¸­è¿›è¡Œé…ç½®</p></blockquote> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> extend <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi-request'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> notification <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> local <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// true æœ¬åœ°åç«¯ false å¼€å‘(æµ‹è¯•)ç¯å¢ƒ</span>

<span class="token keyword">interface</span> <span class="token class-name">ResponseError</span><span class="token operator">&lt;</span><span class="token constant">D</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  data<span class="token punctuation">:</span> <span class="token constant">D</span><span class="token punctuation">;</span>
  response<span class="token punctuation">:</span> Response<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> codeMessage <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">200</span><span class="token punctuation">:</span> <span class="token string">'æœåŠ¡å™¨æˆåŠŸè¿”å›è¯·æ±‚çš„æ•°æ®ã€‚'</span><span class="token punctuation">,</span>
  <span class="token number">201</span><span class="token punctuation">:</span> <span class="token string">'æ–°å»ºæˆ–ä¿®æ”¹æ•°æ®æˆåŠŸã€‚'</span><span class="token punctuation">,</span>
  <span class="token number">202</span><span class="token punctuation">:</span> <span class="token string">'ä¸€ä¸ªè¯·æ±‚å·²ç»è¿›å…¥åå°æ’é˜Ÿï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼‰ã€‚'</span><span class="token punctuation">,</span>
  <span class="token number">204</span><span class="token punctuation">:</span> <span class="token string">'åˆ é™¤æ•°æ®æˆåŠŸã€‚'</span><span class="token punctuation">,</span>
  <span class="token number">400</span><span class="token punctuation">:</span> <span class="token string">'å‘å‡ºçš„è¯·æ±‚æœ‰é”™è¯¯ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ–°å»ºæˆ–ä¿®æ”¹æ•°æ®çš„æ“ä½œã€‚'</span><span class="token punctuation">,</span>
  <span class="token number">401</span><span class="token punctuation">:</span> <span class="token string">'ç”¨æˆ·æ²¡æœ‰æƒé™ï¼ˆä»¤ç‰Œã€ç”¨æˆ·åã€å¯†ç é”™è¯¯ï¼‰ã€‚'</span><span class="token punctuation">,</span>
  <span class="token number">403</span><span class="token punctuation">:</span> <span class="token string">'ç”¨æˆ·å¾—åˆ°æˆæƒï¼Œä½†æ˜¯è®¿é—®æ˜¯è¢«ç¦æ­¢çš„ã€‚'</span><span class="token punctuation">,</span>
  <span class="token number">404</span><span class="token punctuation">:</span> <span class="token string">'å‘å‡ºçš„è¯·æ±‚é’ˆå¯¹çš„æ˜¯ä¸å­˜åœ¨çš„è®°å½•ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ“ä½œã€‚'</span><span class="token punctuation">,</span>
  <span class="token number">406</span><span class="token punctuation">:</span> <span class="token string">'è¯·æ±‚çš„æ ¼å¼ä¸å¯å¾—ã€‚'</span><span class="token punctuation">,</span>
  <span class="token number">410</span><span class="token punctuation">:</span> <span class="token string">'è¯·æ±‚çš„èµ„æºè¢«æ°¸ä¹…åˆ é™¤ï¼Œä¸”ä¸ä¼šå†å¾—åˆ°çš„ã€‚'</span><span class="token punctuation">,</span>
  <span class="token number">422</span><span class="token punctuation">:</span> <span class="token string">'å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå‘ç”Ÿä¸€ä¸ªéªŒè¯é”™è¯¯ã€‚'</span><span class="token punctuation">,</span>
  <span class="token number">500</span><span class="token punctuation">:</span> <span class="token string">'æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨ã€‚'</span><span class="token punctuation">,</span>
  <span class="token number">502</span><span class="token punctuation">:</span> <span class="token string">'ç½‘å…³é”™è¯¯ã€‚'</span><span class="token punctuation">,</span>
  <span class="token number">503</span><span class="token punctuation">:</span> <span class="token string">'æœåŠ¡ä¸å¯ç”¨ï¼ŒæœåŠ¡å™¨æš‚æ—¶è¿‡è½½æˆ–ç»´æŠ¤ã€‚'</span><span class="token punctuation">,</span>
  <span class="token number">504</span><span class="token punctuation">:</span> <span class="token string">'ç½‘å…³è¶…æ—¶ã€‚'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * å¼‚å¸¸å¤„ç†ç¨‹åº
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">errorHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">:</span> ResponseError</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> response <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> Response <span class="token punctuation">}</span> <span class="token operator">=</span> error<span class="token punctuation">;</span>
  <span class="token keyword">const</span> errortext <span class="token operator">=</span> codeMessage<span class="token punctuation">[</span>response<span class="token punctuation">.</span>status<span class="token punctuation">]</span> <span class="token operator">||</span> response<span class="token punctuation">.</span>statusText<span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> status <span class="token punctuation">}</span> <span class="token operator">=</span> response<span class="token punctuation">;</span>

  notification<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// message: `è¯·æ±‚é”™è¯¯ ${status}: ${url}`,</span>
    message<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">è¯·æ±‚é”™è¯¯ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    description<span class="token punctuation">:</span> errortext<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> response
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  errorHandler<span class="token punctuation">,</span> <span class="token comment">// é»˜è®¤é”™è¯¯å¤„ç†</span>
  credentials<span class="token punctuation">:</span> <span class="token string">'include'</span><span class="token punctuation">,</span> <span class="token comment">// é»˜è®¤è¯·æ±‚æ˜¯å¦å¸¦ä¸Šcookie</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

request<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sendOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>options<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>options <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>method <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>method<span class="token punctuation">.</span><span class="token function">toLocaleLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'post'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sendOptions<span class="token punctuation">.</span>data <span class="token operator">=</span> options<span class="token punctuation">.</span>params<span class="token punctuation">;</span>
    <span class="token keyword">delete</span> sendOptions<span class="token punctuation">.</span>params<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// url: `/${process.env.NODE_ENV === 'development' ? 'test/api' : ''}/v1${url}`,</span>
      url<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>local <span class="token operator">?</span> <span class="token string">'local'</span><span class="token punctuation">:</span> <span class="token string">'localTest'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/api</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">:</span> <span class="token string">'/api'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/v1</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>sendOptions<span class="token punctuation">,</span> interceptors<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// @ts-ignore</span>
request<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">'000001'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      notification<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        message<span class="token punctuation">:</span> data<span class="token punctuation">.</span>message<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// @ts-ignore</span>
      window<span class="token punctuation">.</span>location <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin<span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token string">'000000'</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      notification<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        message<span class="token punctuation">:</span> data<span class="token punctuation">.</span>message<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'catch error:'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> response<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> request<span class="token punctuation">;</span>


</code></pre></div><div class="language- extra-class"><pre class="language-text"><code> proxy: {
    '/local/api': {
      target: 'http://localhost:8080',
      changeOrigin: true,
      pathRewrite: { '^/local/api': '/api' },
    },
    '/localTest/api': {
      target: 'https://xxxxx.com',
      changeOrigin: true,
      pathRewrite: { '^/localTest/api': '/api' },
    },
    &quot;/api&quot;: {
      target: &quot;https://xxxxx.com&quot;,
      changeOrigin: true,
    },
  },

</code></pre></div><p>é¡ºä¾¿è§£å†³ç»„å‘˜å°†tsç¼–è¯‘çš„js .map.jsä¹Ÿæäº¤çš„é—®é¢˜å¤„ç†äº†ä¸‹
ã€‚ã€‚ã€‚ã€‚ã€‚20:00ä¸‹ç­
æ˜¨å¤©çš„äº‹ï¼Œä»Šå¤©æ²¡èµ·åºŠå°±åœ¨åæ€ï¼Œä¸Šç­æ¥åˆ°è®°å½•ä¸‹</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/look/pc/react/mockjs.html">
          æ¨¡æ‹Ÿæ•°æ®
        </a>
        â†’
      </span></p></div> </div> <!----></div></div>
    <script src="/look/assets/js/app.b2ccb0bc.js" defer></script><script src="/look/assets/js/31.621d74fe.js" defer></script>
  </body>
</html>
